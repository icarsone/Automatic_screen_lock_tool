# 蓝牙自动锁屏工具

## 项目简介

蓝牙自动锁屏工具是一个基于蓝牙设备检测的自动锁屏应用程序。当您携带绑定的蓝牙设备（如手机）离开电脑一定距离后，系统将自动锁定屏幕，保护您的隐私和数据安全。

## 功能特点

- **自动检测**：持续监控指定蓝牙设备的存在状态
- **智能锁屏**：当绑定设备离开一段时间后自动锁定电脑屏幕（仅锁屏一次）
- **智能恢复**：当设备重新回到附近时，重置锁屏状态，允许下次离开时再次锁屏
- **跨平台支持**：支持 Windows、Linux 和 macOS 系统
- **系统托盘图标**：提供直观的状态显示和操作界面
- **设备绑定**：简单的图形界面用于选择和绑定蓝牙设备

## 使用方法

### 安装依赖

```bash
pip install bluetooth pystray pillow
```

### 运行程序

```bash
python ble_lock.py
```

### 首次使用

1. 首次运行时，程序会自动打开设备绑定界面
2. 点击"重新扫描"按钮搜索附近的蓝牙设备
3. 从列表中选择您想要绑定的设备（通常是您的手机）
4. 点击"确认"按钮完成绑定

### 日常使用

- 程序启动后会在系统托盘显示一个蓝色图标
- 托盘菜单显示当前设备状态（设备在附近/设备离开/设备未携带）
- 当您携带绑定的设备离开电脑超过预设时间（默认30秒）后，系统将自动锁屏
- 您可以通过托盘菜单随时重新绑定设备或退出程序

## 技术实现

### 核心技术

- **蓝牙通信**：使用 Python 的 `bluetooth` 库实现设备扫描和检测
- **多线程处理**：采用线程分离监控逻辑和用户界面，确保程序响应性
- **系统集成**：根据不同操作系统调用相应的锁屏API
- **状态管理**：实时监控和更新设备状态，智能判断锁屏时机
- **配置持久化**：使用JSON文件保存设备配置信息

### 工作原理

1. **设备绑定**：用户选择并绑定一个蓝牙设备，配置信息保存到本地
2. **持续监控**：程序定期扫描周围蓝牙设备，检查绑定设备是否在范围内
3. **状态判断**：
   - 如果检测到设备，状态设为"设备在附近"
   - 如果曾检测到但随后未检测到，状态设为"设备离开"，并开始计时
   - 如果一直未检测到，状态显示为"设备未携带"
4. **自动锁屏**：当设备离开状态持续超过阈值时间（默认30秒），自动执行锁屏操作，且在设备重新回到附近前不会重复锁屏
5. **智能恢复**：当设备重新回到附近时，重置锁屏状态，允许下次离开时再次触发锁屏

### 系统架构

- **监控线程**：负责蓝牙设备扫描和状态判断
- **GUI模块**：提供设备绑定的图形界面
- **系统托盘**：显示程序状态和提供用户操作入口
- **锁屏模块**：根据不同操作系统实现屏幕锁定功能

## 配置选项

程序默认配置适合大多数用户，如需调整可修改源代码中的以下参数：

- `absence_threshold`：设备离开多长时间后锁屏（默认30秒）
- `scan_interval`：蓝牙扫描间隔时间（默认2秒）

## 常见问题

1. **无法检测到蓝牙设备**
   - 确保您的电脑蓝牙已开启
   - 确保目标设备蓝牙已开启且可被发现
   - 尝试重启蓝牙服务

2. **锁屏功能不工作**
   - 确保程序有足够的系统权限
   - 检查操作系统的锁屏策略设置

3. **程序占用资源过高**
   - 尝试增加扫描间隔时间减少资源占用

## 系统要求

- Python 3.6+
- 支持蓝牙功能的电脑
- Windows 10/11, macOS 10.14+, 或主流Linux发行版

## 许可证

MIT License

## 贡献指南

欢迎提交问题报告和功能建议。如果您想贡献代码，请先创建issue讨论您的想法。

## 未来计划

- 添加更多自定义配置选项
- 优化蓝牙扫描性能
- 添加多设备绑定支持
- 实现更智能的存在检测算法 